// import '../ecommerce/models/base-model/cities.model.aml' {cities}
// import '../ecommerce/models/base-model/countries.model.aml' {countries}


Model my_dm_cities {
  type: 'query'
  label: 'My Cities'
  owner: "dat.cv@holistics.io"
  description: "abc"
  data_source_name: 'demodb'


  models: [
    cities,
    countries
  ] //to be deprecated in AML 2.0 nha

  // query: @sql
  //   select CASE
  //       WHEN {% filter(field_selection) %} 'field1' {% end %} THEN city_id
  //       WHEN {% filter(field_selection) %} 'field2' {% end %} THEN {{ count_city_1 }}
  //       ELSE 'unknown'
  //   END as dynamic_dimension
  //   from {{ #cities as ci }}
  // ;;

  query: @sql select * from {{ #cities as ci }} ;;

  param field_selection {
    type: 'text'
    label: 'Field Selection'
    allowed_values: ['field1', 'field2']
  }

  measure count_city_1 {
    label: 'Count City 1'
    type: 'number'
    definition: @aql count(city_id) ;;
  }

  dimension city_id {
    label: 'City Id'
    type: 'number'
  }

  dimension city_name {
    label: 'City Name'
    type: 'text'
  }

  dimension country_code {
    label: 'Country Code'
    type: 'text'
  }

  dimension country_name {
    label: 'Country Name'
    type: 'text'
  }

  // Parameters
  param city_param_text {
    label: 'City Param - text'
    type: 'text'

    allowed_values: [
      'Chicago',
      'New York',
      'Ho Chi Minh'
    ]
  }

  param city_param_number {
    label: 'City Param - number'
    type: 'number'
  }

  param city_param_date {
    label: 'City Param - date'
    type: 'date'
  }

  param city_param_datetime {
    label: 'City Param - datetime'
    type: 'datetime'
  }

  param city_param_truefalse {
    label: 'City Param - truefalse'
    type: 'truefalse'
  }


  // dimension continent_name {
  //   label: 'Continent Name'
  //   type: 'text'
  // }

}