Dashboard lotr_dashboard {
  theme: PageTheme {
    background {
      bg_color: "#E3E0D7"
    }
    canvas {
      background {
        bg_color: '#F1EFEA'
      }
      border {
        border_radius: '16px'
      }
      shadow: "md"

    }
    block {
      label: FontTheme {
        font_size: 24
        font_color: '#4B3E18'
      }
      padding: DetailedSpacing {
        top: 24
        left: 52
        bottom: 24
        right: 12
      }
      border {
        border_width: 4
        border_color: '#E4E0D5'
        border_radius: DetailedRadius {
          top_left: 72
          top_right: 72
          bottom_left: 0
          bottom_right: 0
        }
        border_style: "double"
      }
      background {
        bg_color: "#F9F9F7"

      }
    }

  }

  title: 'LOTR Dashboard'
  description: ''''''
  view: CanvasLayout {
    label: 'View 1'
    width: 1350
    height: 1790
    block v1 {
      position: pos(700, 690, 600, 420)
    }
    block v2 {
      position: pos(60, 340, 750, 310)
    }
    block v3 {
      position: pos(860, 340, 440, 310)
    }
    block v4 {
      position: pos(60, 700, 590, 410)
    }
    block t1 {
      position: pos(-20, -10, 1390, 190)
    }
  }
  block v1: VizBlock {
    label: 'Lines of dialogue per character'
    viz: BarChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'first_name')
        operator: 'top'
        value: 10
        options {
          rank_by {
            field: ref('bigquery_demo_lotr_scripts', 'dialog')
            aggregation: 'count distinct'
            logic: 'standard'
          }
        }
      }
      x_axis: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'first_name')
        format {
          type: 'text'
        }
      }
      y_axis {
        label: 'Lines of Dialogue'
        settings {
          group_values_into: 5
          show_data_label_by: 'value'
        }
        series {
          field {
            label: 'Lines of dialogue'
            ref: ref('bigquery_demo_lotr_scripts', 'dialog')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#2C5945FF'
          }
        }
      }
      settings {
        row_limit: 5000
        legend_label: 'hidden'
      }
    }
  }
  block v2: VizBlock {
    label: 'Middle-earth Races'
    viz: ColumnChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'race')
        operator: 'not_null'
        value: []
      }
      filter {
        field: ref('bigquery_demo_lotr_characters', 'race')
        operator: 'top'
        value: 6
        options {
          rank_by {
            field: ref('bigquery_demo_lotr_characters', 'first_name')
            aggregation: 'count distinct'
            logic: 'standard'
          }
        }
      }
      x_axis: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'race')
        format {
          type: 'text'
        }
      }
      y_axis {
        series {
          field {
            label: ' '
            ref: ref('bigquery_demo_lotr_characters', 'first_name')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#93754EFF'
          }
        }
      }
      settings {
        row_limit: 5000
        legend_label: 'hidden'
      }
    }
  }
  block v3: VizBlock {
    label: 'Characters Gender'
    viz: PieChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'gender')
        operator: 'not_null'
        value: []
      }
      legend: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'gender')
        format {
          type: 'text'
        }
      }
      series {
        field {
          label: ' '
          ref: ref('bigquery_demo_lotr_characters', 'first_name')
          aggregation: 'count distinct'
          format {
            type: 'number'
            pattern: 'inherited'
          }
        }
        settings {
          point {
            value: 'Female'
            color: '#999999FF'
          }
          point {
            value: 'Male'
            color: '#2C5945FF'
          }
        }
      }
      settings {
        row_limit: 5000
        legend_label: 'hidden'
        show_data_label_by: 'percentage'
        group_values_into: 2
      }
    }
  }
  block v4: VizBlock {
    label: 'Race and Gender'
    viz: ColumnChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'gender')
        operator: 'is'
        value: [
          'Male',
          'Female'
        ]
      }
      filter {
        field: ref('bigquery_demo_lotr_characters', 'first_name')
        operator: 'greater_than'
        value: '5'
      }
      x_axis: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'race')
        format {
          type: 'text'
        }
      }
      legend: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'gender')
        format {
          type: 'text'
        }
      }
      y_axis {
        label: 'Frequency'
        settings {
          axis_min: 5
          stack_series_by: 'value'
        }
        series {
          field {
            label: ' '
            ref: ref('bigquery_demo_lotr_characters', 'first_name')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            point {
              value: 'Female'
              color: '#9D8463FF'
            }
            point {
              value: 'Male'
              color: '#2C5945FF'
            }
          }
        }
      }
      settings {
        row_limit: 5000
      }
    }
  }
  block t1: TextBlock {
    theme: BlockTheme {
      padding: 1
      border: BorderTheme {
        border_style: "none"
        border_color: "white"

      }
    }
    content: @md <div style="width:100%;height:200px;background-color:#2C5945"></div>;;
  }

}