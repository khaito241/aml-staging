Dashboard lotr_dashboard {
  title: 'LOTR Dashboard'
  description: ''''''
  view: CanvasLayout {
    label: 'View 1'
    width: 1350
    height: 800
    block v1 {
      position: pos(70, 190, 390, 420)
    }
    block v2 {
      position: pos(920, 30, 400, 300)
    }
    block v3 {
      position: pos(480, 30, 410, 310)
    }
    block v4 {
      position: pos(500, 370, 450, 330)
    }
  }
  block v1: VizBlock {
    label: 'Lines of dialogue per character'
    viz: BarChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'first_name')
        operator: 'top'
        value: 10
        options {
          rank_by {
            field: ref('bigquery_demo_lotr_scripts', 'dialog')
            aggregation: 'count distinct'
            logic: 'standard'
          }
        }
      }
      x_axis: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'first_name')
        format {
          type: 'text'
        }
      }
      y_axis {
        label: 'Lines of Dialogue'
        settings {
          group_values_into: 5
          show_data_label_by: 'value'
        }
        series {
          field {
            label: 'Lines of dialogue'
            ref: ref('bigquery_demo_lotr_scripts', 'dialog')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#2C5945FF'
          }
        }
      }
      settings {
        row_limit: 5000
        legend_label: 'hidden'
      }
    }
  }
  block v2: VizBlock {
    label: 'Middle-earth Races'
    viz: ColumnChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'race')
        operator: 'not_null'
        value: []
      }
      filter {
        field: ref('bigquery_demo_lotr_characters', 'race')
        operator: 'top'
        value: 6
        options {
          rank_by {
            field: ref('bigquery_demo_lotr_characters', 'first_name')
            aggregation: 'count distinct'
            logic: 'standard'
          }
        }
      }
      x_axis: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'race')
        format {
          type: 'text'
        }
      }
      y_axis {
        series {
          field {
            label: ' '
            ref: ref('bigquery_demo_lotr_characters', 'first_name')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#93754EFF'
          }
        }
      }
      settings {
        row_limit: 5000
        legend_label: 'hidden'
      }
    }
  }
  block v3: VizBlock {
    label: 'Characters Gender'
    viz: PieChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'gender')
        operator: 'not_null'
        value: []
      }
      legend: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'gender')
        format {
          type: 'text'
        }
      }
      series {
        field {
          label: ' '
          ref: ref('bigquery_demo_lotr_characters', 'first_name')
          aggregation: 'count distinct'
          format {
            type: 'number'
            pattern: 'inherited'
          }
        }
        settings {
          point {
            value: 'Female'
            color: '#999999FF'
          }
          point {
            value: 'Male'
            color: '#2C5945FF'
          }
        }
      }
      settings {
        row_limit: 5000
        legend_label: 'hidden'
        show_data_label_by: 'percentage'
        group_values_into: 2
      }
    }
  }
  block v4: VizBlock {
    label: 'Race and Gender'
    viz: ColumnChart {
      dataset: demo_lotr
      filter {
        field: ref('bigquery_demo_lotr_characters', 'gender')
        operator: 'is'
        value: [
          'Male',
          'Female'
        ]
      }
      filter {
        field: ref('bigquery_demo_lotr_characters', 'first_name')
        operator: 'greater_than'
        value: '5'
      }
      x_axis: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'race')
        format {
          type: 'text'
        }
      }
      legend: VizFieldFull {
        ref: ref('bigquery_demo_lotr_characters', 'gender')
        format {
          type: 'text'
        }
      }
      y_axis {
        label: 'Frequency'
        settings {
          axis_min: 5
          stack_series_by: 'value'
        }
        series {
          field {
            label: ' '
            ref: ref('bigquery_demo_lotr_characters', 'first_name')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            point {
              value: 'Female'
              color: '#9D8463FF'
            }
            point {
              value: 'Male'
              color: '#2C5945FF'
            }
          }
        }
      }
      settings {
        row_limit: 5000
        legend_label: 'left'
      }
    }
  }

}