Dashboard ecommerce_minh {
  title: 'Ecommerce Minh'
  description: ''''''

  view: CanvasLayout {
    label: 'View 1'
    height: 2630
    block v1 {
      position: pos(50, 150, 270, 180)
    }
    block v2 {
      position: pos(350, 150, 280, 180)
    }
    block v3 {
      position: pos(660, 370, 490, 290)
    }
    block v4 {
      position: pos(50, 370, 270, 290)
    }
    block v5 {
      position: pos(350, 370, 280, 290)
    }
    block v6 {
      position: pos(660, 150, 490, 180)
    }
    block f1 {
      position: pos(50, 690, 1100, 120)
    }
    block t1 {
      position: pos(50, 30, 1100, 100)
    }
    block v7 {
      position: pos(110, 840, 190, 100)
    }
    block v8 {
      position: pos(450, 840, 190, 110)
    }
    block v9 {
      position: pos(850, 840, 190, 100)
    }
    block t2 {
      position: pos(340, 840, 80, 90)
    }
    block t3 {
      position: pos(720, 840, 80, 90)
    }
    block v10 {
      position: pos(80, 1030, 480, 370)
    }
    block v11 {
      position: pos(590, 1200, 190, 150)
    }
    block t4 {
      position: pos(590, 1170, 380, 30)
    }
    block v15 {
      position: pos(590, 1030, 210, 150)
    }
    block v16 {
      position: pos(820, 1200, 210, 150)
    }
    block v17 {
      position: pos(80, 1500, 1070, 880)
    }
    block f2 {
      position: pos(80, 1420, 300, 80)
    }
    block f3 {
      position: pos(450, 1420, 300, 80)
    }
    block f4 {
      position: pos(850, 1420, 300, 80)
    }
  }
  block v1: VizBlock {
    label: 'CountD of Order Id'
    viz: MetricKpi {
      dataset: demo_ecommerce
      value: VizFieldFull {
        label: 'Total Orders'
        ref: ref('order_master', 'order_id')
        aggregation: 'count distinct'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v2: VizBlock {
    label: 'Total Users'
    viz: MetricKpi {
      dataset: demo_ecommerce
      value: VizFieldFull {
        label: 'Total Users'
        ref: ref('ecommerce_users', 'id')
        aggregation: 'count distinct'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v3: VizBlock {
    label: 'Revenue by Country'
    viz: ColumnChart {
      dataset: demo_ecommerce
      legend: VizFieldFull {
        ref: ref('ecommerce_countries', 'name')
        format {
          type: 'text'
        }
      }
      y_axis {
        series {
          field: VizFieldFull {
            label: ' '
            ref: ref('order_master', 'revenue')
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            point {
              value: 'Australia'
              color: '#438FE8FF'
            }
            point {
              value: 'France'
              color: '#50CAA5FF'
            }
            point {
              value: 'Germany'
              color: '#123986FF'
            }
            point {
              value: 'India'
              color: '#C457C6FF'
            }
            point {
              value: 'Indonesia'
              color: '#9B1995'
            }
            point {
              value: 'Singapore'
              color: '#E5BA4F'
            }
            point {
              value: 'South Korea'
              color: '#D25236'
            }
            point {
              value: 'United Kingdom'
              color: '#438FE8FF'
            }
            point {
              value: 'United States'
              color: '#50CAA5FF'
            }
            point {
              value: 'Vietnam'
              color: '#123986FF'
            }
          }
        }
      }
      settings {
        row_limit: 10000
        legend_label: 'right'
        x_axis_label: 'Revenue by Country'
      }
    }
    settings {
      hide_label: true
    }
  }
  block v4: VizBlock {
    label: 'Orders overtime'
    viz: LineChart {
      dataset: demo_ecommerce
      x_axis: VizFieldFull {
        ref: ref('order_master', 'order_created_at')
        transformation: 'datetrunc month'
        format {
          type: 'date'
        }
      }
      y_axis {
        series {
          field: VizFieldFull {
            label: 'Total Orders'
            ref: ref('order_master', 'order_id')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#438FE8FF'
          }
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v5: VizBlock {
    label: 'Users overtime'
    viz: LineChart {
      dataset: demo_ecommerce
      x_axis: VizFieldFull {
        ref: ref('ecommerce_users', 'sign_up_at')
        transformation: 'datetrunc month'
        format {
          type: 'date'
        }
      }
      y_axis {
        series {
          field: VizFieldFull {
            ref: ref('order_master', 'count_distinct_users')
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#50CAA5FF'
          }
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v6: VizBlock {
    label: 'Revenue'
    viz: MetricKpi {
      dataset: demo_ecommerce
      calculation f_09395c8 {
        label: 'Untitled Metric'
        formula: @aql order_master.revenue*1.5;;
        calc_type: 'measure'
        data_type: 'number'
      }
      value: VizFieldFull {
        ref: ref('order_master', 'revenue')
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      compare_value: VizFieldFull {
        label: 'Goal'
        ref: 'f_09395c8'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      settings {
        display_mode: 'progress'
      }
    }
    settings {
      hide_label: true
    }
  }
  block f1: FilterBlock {
    label: 'Country'
    type: 'field'
    source: FieldFilterSource {
      dataset: demo_ecommerce
      field: ref('ecommerce_countries', 'name')
    }
    default {
      operator: 'is'
      value: []
    }
  }
  block t1: TextBlock {
    content: @md # Ecommerce Dashboard;;
  }
  block v7: VizBlock {
    label: 'CountD of Order Id (dup)'
    viz: MetricKpi {
      dataset: demo_ecommerce
      filter {
        field: ref('ecommerce_orders', 'status')
        operator: 'is'
        value: 'delivered'
      }
      value: VizFieldFull {
        label: 'Delivered'
        ref: ref('order_master', 'order_id')
        aggregation: 'count distinct'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      settings {
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v8: VizBlock {
    label: 'CountD of Order Id (dup) (dup)'
    viz: MetricKpi {
      dataset: demo_ecommerce
      filter {
        field: ref('ecommerce_orders', 'status')
        operator: 'is'
        value: 'cancelled'
      }
      value: VizFieldFull {
        label: 'Cancelled'
        ref: ref('order_master', 'order_id')
        aggregation: 'count distinct'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      settings {
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v9: VizBlock {
    label: 'CountD of Order Id (dup) (dup) (dup)'
    viz: MetricKpi {
      dataset: demo_ecommerce
      filter {
        field: ref('ecommerce_orders', 'status')
        operator: 'is'
        value: 'refunded'
      }
      value: VizFieldFull {
        label: 'Refunded'
        ref: ref('order_master', 'order_id')
        aggregation: 'count distinct'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      settings {
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block t2: TextBlock {
    content: @md <div style="height: 95px; width: 1px; background-color: #ccc;"></div>;;
  }
  block t3: TextBlock {
    content: @md <div style="height: 95px; width: 1px; background-color: #ccc;"></div>;;
  }
  block v10: VizBlock {
    label: 'Sales'
    viz: LineChart {
      dataset: demo_ecommerce
      filter {
        field: ref('ecommerce_orders', 'status')
        operator: 'is'
        value: 'delivered'
      }
      filter {
        field: ref('order_master', 'order_created_date')
        operator: 'last'
        value: '15'
        modifier: 'day'
      }
      x_axis: VizFieldFull {
        ref: ref('order_master', 'order_created_date')
        transformation: 'datetrunc day'
        format {
          type: 'date'
        }
      }
      y_axis {
        series {
          field: VizFieldFull {
            ref: ref('order_master', 'revenue_delivered')
            format {
              type: 'number'
              pattern: '[$$]#,###'
            }
          }
          settings {
            color: '#5EB536FF'
          }
        }
      }
      settings {
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
  }
  block v11: VizBlock {
    label: 'Complete orders count'
    viz: MetricKpi {
      dataset: demo_ecommerce
      filter {
        field: ref('ecommerce_orders', 'created_date')
        operator: 'last'
        value: '2'
        modifier: 'day'
      }
      value: VizFieldFull {
        label: 'Orders'
        ref: ref('order_master', 'completed_order_count')
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      compare_value: VizPopSettings {
        field: ref('ecommerce_orders', 'created_date')
        duration: 1
        granularity: 'week'
      }
      settings {
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block t4: TextBlock {
    content: @md <div style="height: 1px; width: 500px; background-color: #ccc;"></div>;;
  }
  block v15: VizBlock {
    label: 'Complete orders count (dup)'
    viz: MetricKpi {
      dataset: demo_ecommerce
      filter {
        field: ref('ecommerce_orders', 'created_date')
        operator: 'last'
        value: '2'
        modifier: 'day'
      }
      value: VizFieldFull {
        label: 'Revenue'
        ref: ref('order_master', 'revenue_delivered')
        format {
          type: 'number'
          pattern: '[$$]#,###'
        }
      }
      compare_value: VizPopSettings {
        field: ref('ecommerce_orders', 'created_date')
        duration: 1
        granularity: 'week'
      }
      settings {
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v16: VizBlock {
    label: 'Complete orders count (dup) (dup)'
    viz: MetricKpi {
      dataset: demo_ecommerce
      filter {
        field: ref('ecommerce_orders', 'created_date')
        operator: 'last'
        value: '2'
        modifier: 'day'
      }
      value: VizFieldFull {
        label: 'Customers'
        ref: ref('order_master', 'users_count')
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      compare_value: VizPopSettings {
        field: ref('ecommerce_orders', 'created_date')
        duration: 1
        granularity: 'week'
      }
      settings {
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v17: VizBlock {
    label: 'Sales (dup)'
    viz: PivotTable {
      dataset: demo_ecommerce
      rows: [
        VizFieldFull {
          ref: ref('ecommerce_orders', 'id')
          format {
            type: 'number'
            pattern: 'inherited'
          }
        },
        VizFieldFull {
          label: 'Date'
          ref: ref('order_master', 'order_created_at')
          transformation: 'datetrunc hour'
          format {
            type: 'datetime'
          }
        },
        VizFieldFull {
          ref: ref('ecommerce_users', 'full_name')
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: ref('ecommerce_products', 'name')
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: ref('order_master', 'status')
          format {
            type: 'text'
          }
        }
      ]
      values: [
        VizFieldFull {
          label: 'Total'
          ref: ref('order_master', 'gmv')
          format {
            type: 'number'
            pattern: '[$$]#,###'
          }
        }
      ]
      settings {
        show_row_total: true
        show_column_total: true
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block f2: FilterBlock {
    label: 'Status'
    type: 'field'
    source: FieldFilterSource {
      dataset: demo_ecommerce
      field: ref('ecommerce_orders', 'status')
    }
    default {
      operator: 'is'
      value: []
    }
  }
  block f3: FilterBlock {
    label: 'Product'
    type: 'field'
    source: FieldFilterSource {
      dataset: demo_ecommerce
      field: ref('ecommerce_orders', 'status')
    }
    default {
      operator: 'is'
      value: []
    }
  }
  block f4: FilterBlock {
    label: 'Customer Name'
    type: 'field'
    source: FieldFilterSource {
      dataset: demo_ecommerce
      field: ref('ecommerce_orders', 'status')
    }
    default {
      operator: 'is'
      value: []
    }
  }
  interactions: [
    FilterInteraction {
      from: 'f1'
      to: [
        CustomMapping {
          block: [
            'v1',
            'v2',
            'v3',
            'v4',
            'v5',
            'v6',
            'v7',
            'v8',
            'v9',
            'v10',
            'v11',
            'v15',
            'v16',
            'v17'
          ]
          disabled: true
        }
      ]
    },
    FilterInteraction {
      from: 'f1'
      to: [
        CustomMapping {
          block: [
            'f2',
            'f3',
            'f4'
          ]
          disabled: true
        }
      ]
    },
    FilterInteraction {
      from: 'f2'
      to: [
        CustomMapping {
          block: [
            'v1',
            'v2',
            'v3',
            'v4',
            'v5',
            'v6',
            'v7',
            'v8',
            'v9',
            'v10',
            'v11',
            'v15',
            'v16'
          ]
          disabled: true
        }
      ]
    },
    FilterInteraction {
      from: 'f2'
      to: [
        CustomMapping {
          block: [
            'f1',
            'f3',
            'f4'
          ]
          disabled: true
        }
      ]
    },
    FilterInteraction {
      from: 'f3'
      to: [
        CustomMapping {
          block: [
            'v1',
            'v2',
            'v3',
            'v4',
            'v5',
            'v6',
            'v7',
            'v8',
            'v9',
            'v10',
            'v11',
            'v15',
            'v16'
          ]
          disabled: true
        }
      ]
    },
    FilterInteraction {
      from: 'f3'
      to: [
        CustomMapping {
          block: [
            'f1',
            'f2',
            'f4'
          ]
          disabled: true
        }
      ]
    },
    FilterInteraction {
      from: 'f4'
      to: [
        CustomMapping {
          block: [
            'v1',
            'v2',
            'v3',
            'v4',
            'v5',
            'v6',
            'v7',
            'v8',
            'v9',
            'v10',
            'v11',
            'v15',
            'v16'
          ]
          disabled: true
        }
      ]
    },
    FilterInteraction {
      from: 'f4'
      to: [
        CustomMapping {
          block: [
            'f1',
            'f2',
            'f3'
          ]
          disabled: true
        }
      ]
    }
  ]
}