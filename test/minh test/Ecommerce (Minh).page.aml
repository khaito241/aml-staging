Dashboard ecommerce_minh {
  theme: Cotton
  title: 'Ecommerce Minh'
  description: ''''''

  view: CanvasLayout {
    label: 'View 1'
    height: 1580
    block v1 {
      position: pos(50, 150, 270, 180)
    }
    block v2 {
      position: pos(350, 150, 280, 180)
    }
    block v3 {
      position: pos(660, 370, 490, 290)
    }
    block v4 {
      position: pos(50, 370, 270, 290)
    }
    block v5 {
      position: pos(350, 370, 280, 290)
    }
    block v6 {
      position: pos(660, 150, 490, 180)
    }
    block f1 {
      position: pos(50, 690, 1100, 120)
    }
    block v7 {
      position: pos(50, 830, 1100, 510)
    }
    block t1 {
      position: pos(50, 30, 1100, 100)
    }
  }
  block v1: VizBlock {
    label: 'CountD of Order Id'
    viz: MetricKpi {
      dataset: demo_ecommerce
      value: VizFieldFull {
        label: 'Total Orders'
        ref: ref('order_master', 'order_id')
        aggregation: 'count distinct'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v2: VizBlock {
    label: 'Total Users'
    viz: MetricKpi {
      dataset: demo_ecommerce
      value: VizFieldFull {
        label: 'Total Users'
        ref: ref('ecommerce_users', 'id')
        aggregation: 'count distinct'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v3: VizBlock {
    label: 'Revenue by Country'
    viz: ColumnChart {
      dataset: demo_ecommerce
      legend: VizFieldFull {
        ref: ref('ecommerce_countries', 'name')
        format {
          type: 'text'
        }
      }
      y_axis {
        series {
          field: VizFieldFull {
            label: ' '
            ref: ref('order_master', 'revenue')
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            point {
              value: 'Australia'
              color: '#438FE8FF'
            }
            point {
              value: 'France'
              color: '#50CAA5FF'
            }
            point {
              value: 'Germany'
              color: '#123986FF'
            }
            point {
              value: 'India'
              color: '#C457C6FF'
            }
            point {
              value: 'Indonesia'
              color: '#9B1995'
            }
            point {
              value: 'Singapore'
              color: '#E5BA4F'
            }
            point {
              value: 'South Korea'
              color: '#D25236'
            }
            point {
              value: 'United Kingdom'
              color: '#438FE8FF'
            }
            point {
              value: 'United States'
              color: '#50CAA5FF'
            }
            point {
              value: 'Vietnam'
              color: '#123986FF'
            }
          }
        }
      }
      settings {
        row_limit: 10000
        legend_label: 'right'
        x_axis_label: 'Revenue by Country'
      }
    }
    settings {
      hide_label: true
    }
  }
  block v4: VizBlock {
    label: 'Orders overtime'
    viz: LineChart {
      dataset: demo_ecommerce
      x_axis: VizFieldFull {
        ref: ref('order_master', 'order_created_at')
        transformation: 'datetrunc month'
        format {
          type: 'date'
        }
      }
      y_axis {
        series {
          field: VizFieldFull {
            label: 'Total Orders'
            ref: ref('order_master', 'order_id')
            aggregation: 'count distinct'
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#438FE8FF'
          }
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v5: VizBlock {
    label: 'Users overtime'
    viz: LineChart {
      dataset: demo_ecommerce
      x_axis: VizFieldFull {
        ref: ref('ecommerce_users', 'sign_up_at')
        transformation: 'datetrunc month'
        format {
          type: 'date'
        }
      }
      y_axis {
        series {
          field: VizFieldFull {
            ref: ref('order_master', 'count_distinct_users')
            format {
              type: 'number'
              pattern: 'inherited'
            }
          }
          settings {
            color: '#50CAA5FF'
          }
        }
      }
    }
    settings {
      hide_label: true
    }
  }
  block v6: VizBlock {
    label: 'Revenue'
    viz: MetricKpi {
      dataset: demo_ecommerce
      calculation f_09395c8 {
        label: 'Untitled Metric'
        formula: @aql order_master.revenue*1.5;;
        calc_type: 'measure'
        data_type: 'number'
      }
      value: VizFieldFull {
        ref: ref('order_master', 'revenue')
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      compare_value: VizFieldFull {
        label: 'Goal'
        ref: 'f_09395c8'
        format {
          type: 'number'
          pattern: 'inherited'
        }
      }
      settings {
        display_mode: 'progress'
      }
    }
    settings {
      hide_label: true
    }
  }
  block f1: FilterBlock {
    label: 'Country'
    type: 'field'
    source: FieldFilterSource {
      dataset: demo_ecommerce
      field: ref('ecommerce_countries', 'name')
    }
    default {
      operator: 'is'
      value: []
    }
  }
  block v7: VizBlock {
    label: 'Country revenue by Product and Order status'
    viz: PivotTable {
      dataset: demo_ecommerce
      rows: [
        VizFieldFull {
          ref: ref('map_categories', 'parent_category')
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: ref('map_categories', 'category')
          format {
            type: 'text'
          }
        }
      ]
      columns: [
        VizFieldFull {
          ref: ref('ecommerce_countries', 'name')
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: ref('order_master', 'status')
          format {
            type: 'text'
          }
        }
      ]
      values: [
        VizFieldFull {
          ref: ref('order_master', 'revenue')
          format {
            type: 'number'
            pattern: '[$$]#,###'
          }
        }
      ]
      settings {
        show_column_total: true
        show_sub_total: true
        row_limit: 10000
      }
    }
    settings {
      hide_label: true
    }
  }
  block t1: TextBlock {
    content: @md # Ecommerce Dashboard;;
  }
  interactions: [
    FilterInteraction {
      from: 'f1'
      to: [
        CustomMapping {
          block: [
            'v1',
            'v2',
            'v3',
            'v4',
            'v5',
            'v6'
          ]
          disabled: true
        }
      ]
    }
  ]
}