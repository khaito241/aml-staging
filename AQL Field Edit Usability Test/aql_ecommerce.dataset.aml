Dataset aql_field_edit_ut_dataset {
  __engine__: 'aql'
  label: 'AQL Field Edit Usability Testing Dataset'
  description: ""
  data_source_name: 'demodb'
  models: [
    users,
    order_items,
    cities,
    merchants,
    orders,
    products,
    countries,
    categories,
    date_dim
  ]
  relationships: [
    relationship(cities.country_code > countries.code, false),
    relationship(countries.code > cities.country_code, true),
    relationship(order_items.order_id > orders.id, true),
    relationship(orders.user_id > users.id, true),
    relationship(order_items.product_id > products.id, true),
    relationship(users.city_id > cities.id, true),
    relationship(products.merchant_id > merchants.id, true),
    relationship(merchants.city_id > cities.id, false),
    relationship(products.category_id > categories.id, true),
    relationship(orders.created_date > date_dim.date_d, true),
  ]

  owner: 'thanh.tm@holistics.io'
  metric total_orders {
    label: "Total Orders"
    type: "number"
    hidden: false
    description: ""
    definition: @aql count(orders.id);;
  }
  metric total_users {
    label: "Total Users"
    type: "number"
    hidden: false
    description: ""
    definition: @aql count(users.id);;
  }
  metric running_total_order {
    label: "Running Total Order"
    type: "number"
    hidden: false
    description: ""
    definition: @aql running_total(total_orders, orders.created_at | week());;
  }
  dimension age_groups {
    label: "Age Groups"
    type: "text"
    hidden: false
    description: ""
    definition: @aql case(
  when: and(users.age >= 18, users.age < 50)
  , then: 'Adult'
  , else: 'Senior'
);;
    model: users
  }
  dimension created_at_year {
    label: "Created At Year"
    type: "datetime"
    hidden: false
    description: ""
    definition: @aql orders.created_at | year();;
    model: orders
  }
}