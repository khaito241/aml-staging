Dataset adventure_works {
  label: 'Adventure Works'
  description: ''
  data_source_name: 'adventure_works'
  models: [
    person_address_type,
    human_resources_department,
    purchasing_purchase_order_header,
    production_product_product_photo,
    production_work_order,
    purchasing_purchase_order_detail,
    sales_special_offer_product,
    production_location,
    sales_country_region_currency,
    sales_credit_card,
    production_product_description,
    person_email_address,
    production_document,
    person_address,
    person_business_entity_address,
    person_password,
    person_country_region,
    purchasing_vendor,
    person_phone_number_type,
    production_bill_of_materials,
    sales_sales_order_header_sales_reason,
    production_product_model_illustration,
    production_product_document,
    purchasing_product_vendor,
    production_product_subcategory,
    person_person,
    production_product_list_price_history,
    production_scrap_reason,
    sales_person_credit_card,
    production_product_category,
    sales_store,
    sales_special_offer,
    sales_currency_rate,
    sales_sales_order_header,
    production_product_model,
    person_business_entity,
    production_product_model_product_description_culture,
    production_illustration,
    production_transaction_history_archive,
    person_business_entity_contact,
    person_person_phone,
    production_product_review,
    person_contact_type,
    sales_sales_order_detail,
    human_resources_employee_pay_history,
    human_resources_shift,
    sales_sales_person_quota_history,
    human_resources_employee_department_history,
    production_product,
    sales_customer,
    production_culture,
    sales_shopping_cart_item,
    sales_currency,
    sales_sales_person,
    person_state_province,
    production_product_cost_history,
    human_resources_job_candidate,
    sales_sales_territory,
    purchasing_ship_method,
    human_resources_employee,
    production_work_order_routing,
    sales_sales_territory_history,
    production_product_inventory,
    sales_sales_reason,
    production_product_photo,
    sales_sales_tax_rate,
    production_transaction_history,
    production_unit_measure
  ]
  relationships: [
    relationship(human_resources_employee.business_entity_id - person_person.business_entity_id, false),
    relationship(human_resources_employee_department_history.department_id > human_resources_department.department_id, true),
    relationship(human_resources_employee_department_history.business_entity_id > human_resources_employee.business_entity_id, true),
    relationship(human_resources_employee_department_history.shift_id > human_resources_shift.shift_id, true),
    relationship(human_resources_employee_pay_history.business_entity_id > human_resources_employee.business_entity_id, true),
    relationship(human_resources_job_candidate.business_entity_id > human_resources_employee.business_entity_id, true),
    relationship(person_address.state_province_id > person_state_province.state_province_id, true),
    relationship(person_business_entity_address.address_id > person_address.address_id, true),
    relationship(person_business_entity_address.address_type_id > person_address_type.address_type_id, true),
    relationship(person_business_entity_address.business_entity_id > person_business_entity.business_entity_id, false),
    relationship(person_business_entity_contact.person_id > person_person.business_entity_id, true),
    relationship(person_business_entity_contact.contact_type_id > person_contact_type.contact_type_id, true),
    relationship(person_business_entity_contact.business_entity_id > person_business_entity.business_entity_id, false),
    relationship(person_email_address.business_entity_id > person_person.business_entity_id, true),
    relationship(person_password.business_entity_id - person_person.business_entity_id, true),
    relationship(person_person.business_entity_id - person_business_entity.business_entity_id, true),
    relationship(person_person_phone.business_entity_id > person_person.business_entity_id, true),
    relationship(person_person_phone.phone_number_type_id > person_phone_number_type.phone_number_type_id, true),
    relationship(person_state_province.country_region_code > person_country_region.country_region_code, false),
    relationship(person_state_province.territory_id > sales_sales_territory.territory_id, false),
    relationship(production_bill_of_materials.product_assembly_id > production_product.product_id, true),
    relationship(production_bill_of_materials.component_id > production_product.product_id, false),
    relationship(production_bill_of_materials.unit_measure_code > production_unit_measure.unit_measure_code, false),
    relationship(production_document.owner > human_resources_employee.business_entity_id, true),
    relationship(production_product.size_unit_measure_code > production_unit_measure.unit_measure_code, true),
    relationship(production_product.weight_unit_measure_code > production_unit_measure.unit_measure_code, false),
    relationship(production_product.product_model_id > production_product_model.product_model_id, true),
    relationship(production_product_cost_history.product_id > production_product.product_id, true),
    relationship(production_product_document.product_id > production_product.product_id, true),
    relationship(production_product_document.document_node > production_document.document_node, false),
    relationship(production_product_inventory.location_id > production_location.location_id, true),
    relationship(production_product_inventory.product_id > production_product.product_id, true),
    relationship(production_product_list_price_history.product_id > production_product.product_id, true),
    relationship(production_product_model_illustration.product_model_id > production_product_model.product_model_id, true),
    relationship(production_product_model_illustration.illustration_id > production_illustration.illustration_id, true),
    relationship(production_product_model_product_description_culture.product_description_id > production_product_description.product_description_id, true),
    relationship(production_product_model_product_description_culture.culture_id > production_culture.culture_id, true),
    relationship(production_product_model_product_description_culture.product_model_id > production_product_model.product_model_id, true),
    relationship(production_product_product_photo.product_id > production_product.product_id, true),
    relationship(production_product_product_photo.product_photo_id > production_product_photo.product_photo_id, true),
    relationship(production_product_review.product_id > production_product.product_id, true),
    relationship(production_product_subcategory.product_category_id > production_product_category.product_category_id, true),
    relationship(production_transaction_history.product_id > production_product.product_id, true),
    relationship(production_work_order.product_id > production_product.product_id, true),
    relationship(production_work_order.scrap_reason_id > production_scrap_reason.scrap_reason_id, true),
    relationship(production_work_order_routing.location_id > production_location.location_id, true),
    relationship(production_work_order_routing.work_order_id > production_work_order.work_order_id, false),
    relationship(purchasing_product_vendor.product_id > production_product.product_id, false),
    relationship(purchasing_product_vendor.unit_measure_code > production_unit_measure.unit_measure_code, false),
    relationship(purchasing_product_vendor.business_entity_id > purchasing_vendor.business_entity_id, true),
    relationship(purchasing_purchase_order_detail.product_id > production_product.product_id, false),
    relationship(purchasing_purchase_order_detail.purchase_order_id > purchasing_purchase_order_header.purchase_order_id, true),
    relationship(purchasing_purchase_order_header.employee_id > human_resources_employee.business_entity_id, false),
    relationship(purchasing_purchase_order_header.vendor_id > purchasing_vendor.business_entity_id, false),
    relationship(purchasing_purchase_order_header.ship_method_id > purchasing_ship_method.ship_method_id, true),
    relationship(purchasing_vendor.business_entity_id - person_business_entity.business_entity_id, true),
    relationship(sales_country_region_currency.country_region_code > person_country_region.country_region_code, true),
    relationship(sales_country_region_currency.currency_code > sales_currency.currency_code, false),
    relationship(sales_currency_rate.from_currency_code > sales_currency.currency_code, true),
    relationship(sales_currency_rate.to_currency_code > sales_currency.currency_code, false),
    relationship(sales_customer.person_id > person_person.business_entity_id, false),
    relationship(sales_customer.store_id > sales_store.business_entity_id, false),
    relationship(sales_customer.territory_id > sales_sales_territory.territory_id, false),
    relationship(sales_person_credit_card.business_entity_id > person_person.business_entity_id, true),
    relationship(sales_person_credit_card.credit_card_id > sales_credit_card.credit_card_id, false),
    relationship(sales_sales_order_detail.sales_order_id > sales_sales_order_header.sales_order_id, true),
    relationship(sales_sales_order_header.bill_to_address_id > person_address.address_id, false),
    relationship(sales_sales_order_header.ship_to_address_id > person_address.address_id, true),
    relationship(sales_sales_order_header.credit_card_id > sales_credit_card.credit_card_id, true),
    relationship(sales_sales_order_header.currency_rate_id > sales_currency_rate.currency_rate_id, true),
    relationship(sales_sales_order_header.customer_id > sales_customer.customer_id, true),
    relationship(sales_sales_order_header.sales_person_id > sales_sales_person.business_entity_id, false),
    relationship(sales_sales_order_header.ship_method_id > purchasing_ship_method.ship_method_id, true),
    relationship(sales_sales_order_header.territory_id > sales_sales_territory.territory_id, true),
    relationship(sales_sales_order_header_sales_reason.sales_reason_id > sales_sales_reason.sales_reason_id, true),
    relationship(sales_sales_order_header_sales_reason.sales_order_id > sales_sales_order_header.sales_order_id, true),
    relationship(sales_sales_person.business_entity_id - human_resources_employee.business_entity_id, true),
    relationship(sales_sales_person.territory_id > sales_sales_territory.territory_id, false),
    relationship(sales_sales_person_quota_history.business_entity_id > sales_sales_person.business_entity_id, true),
    relationship(sales_sales_tax_rate.state_province_id > person_state_province.state_province_id, true),
    relationship(sales_sales_territory.country_region_code > person_country_region.country_region_code, true),
    relationship(sales_sales_territory_history.business_entity_id > sales_sales_person.business_entity_id, true),
    relationship(sales_sales_territory_history.territory_id > sales_sales_territory.territory_id, true),
    relationship(sales_shopping_cart_item.product_id > production_product.product_id, true),
    relationship(sales_special_offer_product.product_id > production_product.product_id, true),
    relationship(sales_special_offer_product.special_offer_id > sales_special_offer.special_offer_id, true),
    relationship(sales_store.business_entity_id - person_business_entity.business_entity_id, true),
    relationship(sales_store.sales_person_id > sales_sales_person.business_entity_id, true)
    ,
    relationship(production_product.product_subcategory_id > production_product_subcategory.product_subcategory_id, true)
    ,
    relationship(sales_sales_order_detail.product_id > production_product.product_id, false)
    ,
    relationship(sales_sales_order_detail.special_offer_id_and_product_id > sales_special_offer_product.special_offer_id_and_product_id, true)
  ]
  owner: 'cuong.vc@holistics.io'
  metric scrapped_rate_all {
    label: "Scrapped Rate All"
    type: "number"
    definition: @aql sum(production_work_order.scrapped_qty) * 1.0 / sum(production_work_order.order_qty);;
  }
}
